# Windows 컨테이너 고려 사항

Windows 컨테이너 기술은 리눅스 컨테이너에 비해 다음의 기술적 어려움이 뒤따릅니다.

- 이미지 크기: Windows 컨테이너 이미지는 리눅스 컨테이너에 비해 크기가 매우 큽니다. 기본 Windows Server Core 이미지만 해도 수 GB에 달하며, 이는 배포와 시작 시간에 영향을 미칩니다.
- 호환성 제약: Windows 컨테이너는 호스트 OS 버전과 정확히 일치하거나 호환되는 버전이어야만 실행할 수 있습니다. 이는 리눅스 컨테이너가 가진 유연성에 비해 큰 제약사항입니다.
- 리소스 사용량: Windows 컨테이너는 리눅스 컨테이너에 비해 더 많은 메모리와 CPU 리소스를 필요로 합니다. 이는 동일한 하드웨어에서 실행할 수 있는 컨테이너 수를 제한합니다.

또한, 개발자들에게 있어서도 상당한 학습 곡선이 뒤따릅니다. 다음은 Windows 컨테이너로 이행할 때 개발자들이 직면하는 주요 학습 과제들입니다:

- 파일 시스템 접근 방식 변경: 기존 Windows 애플리케이션에서 흔히 사용하던 로컬 파일 시스템 기반의 영구 저장소 개념을 쓸 수 없습니다. 컨테이너가 종료되면 컨테이너와 함께 파일 시스템이 모두 소거되기 때문입니다. 대신 외부 볼륨이나 네트워크 스토리지를 사용하도록 애플리케이션을 리팩토링해야 합니다.
- 서비스 아키텍처 전환: Windows NT 서비스로 실행되던 백그라운드 프로세스들을 포그라운드 콘솔 애플리케이션으로 리팩토링해야 합니다. 컨테이너는 서비스 관리자를 지원하지 않으며, 컨테이너는 서비스 관리자가 아닌 엔트리포인트로 지정되는 콘솔 프로그램의 생명 주기만 따르기 때문입니다.
  - 물론 이런 부분을 보정해주는 IIS.ServiceMonitor 같은 도구도 있습니다. 그러나 이는 기존 애플리케이션을 리팩토링하지 못하는 경우에 국한하여 제한적으로 사용 가능한 도구입니다.
- 로깅 메커니즘 변경: 기존의 Windows 이벤트 로그 대신 표준 출력(stdout)과 표준 에러(stderr)로 로그를 출력하도록 변경해야 합니다.
- 구성 관리 방식 변경: 레지스트리나 로컬 설정 파일 대신 환경 변수나 외부 구성 관리 시스템을 사용하도록 수정해야 합니다.
- 상태 관리 재설계: 컨테이너의 불변성 특성으로 인해, 애플리케이션의 상태 관리 방식을 완전히 재설계해야 할 수 있습니다.

이러한 변경사항들은 단순한 기술적 전환을 넘어서는 근본적인 아키텍처 변화를 요구하므로, 개발팀은 충분한 학습과 준비 시간이 필요합니다.
