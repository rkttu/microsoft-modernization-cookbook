# IIS 기반 웹 애플리케이션 및 서비스

## 개요

**특성:**

- Microsoft의 엔터프라이즈급 기술 스택(.NET Framework, [ASP.NET](http://ASP.NET), SQL Server)은 안정적이고 성능이 뛰어난 웹 애플리케이션을 제공합니다.
- 리호스팅과 리플랫폼을 통해 기존 시스템을 클라우드로 효율적으로 전환할 수 있습니다.
- 관리형 클라우드 서비스로 인프라 관리를 간소화하고 클라우드의 핵심 이점을 활용할 수 있습니다.

**사례 예시:**

- 대규모 동시접속을 처리하는 기업 포털, 24/7 고객 서비스 시스템, 고가용성 전자상거래 플랫폼 등 엔터프라이즈급 웹 애플리케이션
- 개인정보보호 규제 준수와 높은 보안이 요구되는 공공기관의 대민 서비스 및 내부 업무 시스템

**현대화 전략 선택 기준:**

| 전략 | 코드 변경 | 투자 비용 | 클라우드 이점 | 적합한 상황 |
|------|-----------|-----------|--------------|------------|
| 리호스팅 | 최소 또는 없음 | 낮음 | 제한적 | 빠른 구현, 최소 위험 |
| 리플랫포밍 | 부분적 | 중간 | 중간 | 운영 최적화, 부분 자동화 |
| 리팩토링 | 상당함 | 높음 | 최대 | 전면 현대화, 혁신 추구 |

## 리호스팅 (Lift-and-Shift)

**적용 상황:**

- 기존 ASP.NET 애플리케이션과 IIS 환경을 가능한 한 그대로 유지하면서 빠르게 클라우드 환경 VM으로 이전하고자 할 때
- 개발 리소스나 시간, 초기 투자 비용을 최소화해야 할 때
- 데이터 센터 계약 만료나 하드웨어 노후화로 인한 긴급 이전이 필요할 때

**기대 효과:**

- 기존 애플리케이션의 기능을 그대로 유지하면서 클라우드 인프라의 기본 이점을 활용
- 빠른 이전으로 초기 운영 전환을 완료
- 온프레미스 데이터센터 유지 비용 절감

**장점:**

- **빠른 실행:** 코드 수정 없이 기존 애플리케이션을 클라우드로 신속하게 이전 가능
- **낮은 위험:** 기존 아키텍처를 그대로 유지하여 예상치 못한 재설계 리스크가 줄어듦
- **초기 비용 절감:** 클라우드 도입 초기 투자 및 복잡한 개발 작업 없이 운영 시작

**단점:**

- **클라우드 기능 미활용:** 자동 확장, 관리형 서비스, 서버리스 등 클라우드의 고급 기능을 온전히 활용하기 어려움
- **장기 운영비:** VM 형태로 운영할 경우, 인스턴스 운영 비용이 상대적으로 높을 수 있음
- **기존 문제점 지속:** 온프레미스 환경의 기술적 부채와 아키텍처 제한이 클라우드로 그대로 이전됨

**Azure 서비스 매핑:**

- **Azure Virtual Machines**: IIS 호스팅을 위한 Windows VM
- **Azure Virtual Machine Scale Sets**: 기본적인 자동 크기 조정 기능
- **Azure SQL Database**: 기존 SQL Server 데이터베이스 마이그레이션
- **Azure App Service**: 일부 경우에 코드 변경 없이 호스팅 가능 (WebJob 지원)

**마이그레이션 단계:**

1. **환경 평가**: 기존 애플리케이션의 종속성, 리소스 요구사항, 성능 특성 평가
2. **클라우드 환경 준비**: Azure 구독 설정, Virtual Network, 보안 그룹 구성
3. **마이그레이션 도구 활용**: Azure Migrate 또는 VM 이미지 준비
4. **데이터 마이그레이션**: 데이터베이스 및 파일 마이그레이션
5. **테스트 및 검증**: 기능, 성능, 보안 테스트
6. **전환 계획 수립**: 다운타임 최소화를 위한 전환 전략 수립
7. **운영 이전 및 모니터링**: 모니터링 도구 설정 및 클라우드 운영 모델 적용

## 리플랫포밍 (Re-platforming)

**적용 상황:**

- 기존 ASP.NET 애플리케이션을 약간의 수정으로 클라우드 관리형 서비스로 이전하고자 할 때
- 운영 자동화, 확장성, 보안 등 클라우드 네이티브 기능을 부분적으로 도입해 운영 효율성을 높이고자 할 때
- 중장기적으로 현대화를 진행하면서도 기존 코드베이스의 가치를 최대한 유지하려는 경우

**기대 효과:**

- 관리형 플랫폼을 통해 자동 패치, 보안, 스케일링 기능 등 클라우드 이점을 누림
- 기존 애플리케이션의 핵심 코드는 그대로 유지하면서도 운영 환경이 최적화됨
- 개발팀의 운영 부담 감소 및 새로운 기능 개발에 집중 가능

**장점:**

- **적은 수정:** 전체 애플리케이션 재설계 없이 일부 변경만으로 클라우드 네이티브 기능 도입
- **운영 효율화:** 관리형 서비스 사용으로 운영 및 보안 관리 부담이 감소
- **비용 최적화:** 필요 시 자동 확장 및 리소스 최적화를 통한 비용 절감 효과 기대

**단점:**

- **제한된 최적화:** 전면적인 리팩토링에 비해 클라우드 고유의 최적화 효과는 다소 제한적
- **통합 노력:** 기존 애플리케이션과 클라우드 관리형 서비스 간의 원활한 연동을 위해 약간의 코드 조정 및 재구성이 필요
- **부분적 종속성:** 특정 클라우드 서비스에 대한 종속성 발생 가능

**Azure 서비스 매핑:**

- **Azure App Service**: 웹 애플리케이션 호스팅(WebJobs, 슬롯 배포 지원)
- **Azure SQL Managed Instance**: 기존 SQL Server 기능 호환성 유지
- **Azure Front Door / Application Gateway**: 고급 라우팅, 부하 분산, WAF 보안
- **Azure Key Vault**: 보안 자격 증명 관리
- **Azure Redis Cache**: 세션 상태 관리 및 캐싱
- **Azure Storage**: 파일 및 Blob 스토리지로 기존 파일 시스템 대체

**마이그레이션 단계:**

1. **애플리케이션 평가**: 코드 변경 요구사항 식별 및 계획 수립
2. **종속성 관리**: 기존 종속성을 클라우드 서비스로 대체할 방안 수립
3. **연결 문자열 및 구성 조정**: App Service 환경에 맞는 구성 변경
4. **미들웨어 조정**: IIS 특정 기능을 App Service 호환 방식으로 변경
5. **CI/CD 파이프라인 설정**: 지속적 배포 환경 구축
6. **단계적 마이그레이션**: 트래픽 전환을 위한 슬롯 배포 활용
7. **성능 최적화**: 클라우드 환경에 맞는 성능 튜닝

## 리팩토링 (Refactoring)

**적용 상황:**

- ASP.NET 애플리케이션을 클라우드 네이티브 아키텍처로 재설계하여, 마이크로서비스, 컨테이너, 서버리스 등의 기술을 도입하고자 할 때
- 장기적으로 확장성과 개발 민첩성, 지속적 배포(CI/CD) 환경 구축 등 혁신을 목표로 할 때
- 현대적 개발 방법론을 적용하고 기술적 부채를 해소하려는 조직적 의지가 있을 때

**기대 효과:**

- 애플리케이션 아키텍처 재설계를 통해 운영 효율성, 확장성, 보안, 성능이 크게 개선됨
- 지속적 통합 및 배포 파이프라인 도입으로 개발 및 운영 주기가 단축됨
- 조직의 기술 역량 향상 및 현대적 개발 문화 형성

**장점:**

- **최대의 클라우드 이점 활용:** 완전한 클라우드 네이티브 전환으로 자동 확장, 자율 운영, 최신 보안 기능 등 모두 적용 가능
- **민첩성 및 혁신 촉진:** 애플리케이션을 마이크로서비스로 분리하여 독립적 개발 및 배포가 가능, 향후 개선이 용이
- **장기 비용 절감:** 지속적 개선과 자동화 도입으로 유지보수 및 운영 비용을 크게 절감

**단점:**

- **높은 초기 투자:** 재설계와 코드 리팩토링에 따른 개발 비용, 시간 및 리소스가 많이 소요됨
- **전환 리스크:** 기존 시스템과 새로운 아키텍처 간의 통합 과정에서 예기치 않은 종속성 문제나 장애 발생 위험 존재
- **조직 변화 요구:** DevOps 문화 및 새로운 개발 방법론 도입에 따른 조직 변화가 필요

**Azure 서비스 매핑:**

- **Azure Kubernetes Service(AKS)**: 컨테이너화된 마이크로서비스 운영
- **Azure Functions**: 서버리스 컴퓨팅으로 특정 기능 분리
- **Azure API Management**: API 게이트웨이 및 관리
- **Azure Cosmos DB**: 글로벌 분산 데이터베이스
- **Azure Event Grid/Service Bus**: 이벤트 기반 아키텍처 구현
- **Azure DevOps/GitHub Actions**: CI/CD 파이프라인 자동화
- **Azure Monitor/Application Insights**: 통합 모니터링 및 로깅

**마이그레이션 단계:**

1. **아키텍처 설계**: 마이크로서비스 경계 정의 및 이벤트 드리븐 아키텍처 설계
2. **스트랭글러 패턴 적용**: 점진적으로 레거시 시스템을 대체하는 전략 수립
3. **DevOps 환경 구축**: CI/CD 파이프라인, 자동화된 테스트, 모니터링 체계 구축
4. **컨테이너화 및 오케스트레이션**: 애플리케이션 컴포넌트의 컨테이너화 및 Kubernetes 배포
5. **API 게이트웨이 구현**: 서비스 접근 통합 및 버전 관리
6. **데이터 계층 현대화**: 다중 데이터 스토어 전략 및 데이터 마이그레이션
7. **네트워크 및 보안 설계**: 제로 트러스트 보안 모델 적용
8. **점진적 전환**: 트래픽을 단계적으로 새 시스템으로 이전

## 가상의 사례: 국내 금융권 클라우드 현대화 사례

**배경**: 국내 중견 금융사의 레거시 .NET Framework 기반 내부 업무 시스템

**도전 과제**:
- 노후화된 온프레미스 인프라
- 증가하는 트랜잭션 처리량
- 보안 규정 준수 요구사항
- 새로운 핀테크 서비스와의 통합 필요성

**접근 방법**: 단계적 현대화 전략
1. **1단계** (6개월): 리호스팅을 통한 Azure IaaS로 이전
2. **2단계** (12개월): 핵심 서비스를 App Service로 리플랫포밍
3. **3단계** (18개월): 신규 기능은 .NET Core 마이크로서비스로 개발 및 통합

**결과**:
- 인프라 운영 비용 35% 절감
- 배포 주기 단축 (월 1회 → 주 3회)
- 가용성 증가 (99.5% → 99.95%)
- 규제 준수 보고 자동화로 관리 부담 감소

## 권장 도구 및 리소스

**평가 및 마이그레이션 도구**:
- **Azure Migrate**: 워크로드 검색, 평가 및 마이그레이션
- **Azure App Service Migration Assistant**: 기존 웹 애플리케이션의 호환성 평가
- **Data Migration Assistant**: 데이터베이스 마이그레이션 호환성 검사
- **Azure DevOps**: 소스 코드 관리, CI/CD, 테스트 자동화

**참조 아키텍처**:
- [애플리케이션 현대화를 위한 Azure 아키텍처 센터](https://docs.microsoft.com/ko-kr/azure/architecture/solution-ideas/articles/app-modernization)
- [마이크로서비스 아키텍처 패턴](https://docs.microsoft.com/ko-kr/azure/architecture/microservices/)

**교육 자료**:
- Microsoft Learn: [.NET 애플리케이션을 Azure로 마이그레이션](https://docs.microsoft.com/ko-kr/learn/paths/migrate-dotnet-applications-azure/)
- [Cloud Adoption Framework](https://docs.microsoft.com/ko-kr/azure/cloud-adoption-framework/): 클라우드 도입 전략 및 모범 사례

## 마이그레이션 후 고려사항

**운영 최적화**:
- **비용 관리**: Azure Cost Management를 통한 비용 모니터링 및 최적화
- **성능 모니터링**: Application Insights를 활용한 실시간 성능 모니터링
- **보안 강화**: Azure Security Center를 통한 보안 태세 지속적 개선
- **재해 복구**: 지역 간 백업 및 복구 계획 수립

**지속적 개선**:
- 정기적인 아키텍처 검토 및 기술 부채 관리
- 자동화 영역 확대 및 지속적 최적화
- 클라우드 네이티브 기능 활용도 증가
- 개발자 및 운영팀의 클라우드 역량 강화